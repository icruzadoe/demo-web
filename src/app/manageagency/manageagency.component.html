<app-navbar></app-navbar>
<div class="loading-indicator" *ngIf="loading">
    <div class="windows8 windows-parquet">
      <div class="wBall" id="wBall_1">
        <div class="wInnerBall"></div>
      </div>
      <div class="wBall" id="wBall_2">
        <div class="wInnerBall"></div>
      </div>
      <div class="wBall" id="wBall_3">
        <div class="wInnerBall"></div>
      </div>
      <div class="wBall" id="wBall_4">
        <div class="wInnerBall"></div>
      </div>
      <div class="wBall" id="wBall_5">
        <div class="wInnerBall"></div>
      </div>
    </div>
  </div>
<div class="center-container margin-container">
    <h2 class="text-center">GESTIONAR AGENCIA</h2>
    <br>
    <button (click)="addAgency($event)" class="btn btn-primary">
        AGREGAR AGENCIA
    </button>
    <br>
    <br>

        <div class="form-row ">
            <div class="col-md-6 mb-3">
                <label class="sr-only" for="agency">Agencia:</label>
                <input type="text" class="form-control mb-2" id="agency" placeholder="Ingrese el nombre de la agencia" [(ngModel)] = "agenciaSearch"
                
                    autocomplete="off">
            </div>
            <div class="col-md-3 mb-3">
                <button type="submit" class="btn btn-primary mb-2" (click)="buscarAgencia()">BUSCAR
                    AGENCIA
                </button>
            </div>
        </div>

    <br>
    
    <table class="table table-hover">
        <thead class="thead-color">
            <tr>
                <th scope="col">#</th>
                <th scope="col">NOMBRE DE AGENCIA</th>
                <th scope="col">IP</th>
                <th scope="col">NOMBRE DEL DESTINO</th>
                <th scope="col">CIUDAD</th>
                <th scope="col">EDITAR</th>
                <th scope="col">ELIMINAR</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let p of points; let i = index">
                <td>{{i+1}}</td>
                <td>{{p.points}}</td>
                <td>{{p.ip}}</td>
                <td>{{p.nombre_carpeta_destino}}</td>
                <td>{{p.ciudad}}</td>
                <td>
                    <button (click)="editAgency(p)" mat-button class="text-menu">
                        <i class="material-icons">
                            edit
                        </i>
                    </button>
                </td>
                <td>
                    <button (click)="deleteAgency(p.id)" mat-button class="text-menu">
                        <i class="material-icons">
                            delete
                        </i>
                    </button>
                </td>
            </tr>
        </tbody>
    </table>

</div>

<div class="loading-indicator" *ngIf="editarAgencia">
    <div class="center-container col-md-6 user-container" >
        <div class="card rounded-0">
            <div class="card-body">
                <h2 class="text-center">EDITAR AGENCIA </h2>

                    <div class="form-group">
                        <label for="agenciaEdit">Nombre:</label>
                        <input class="form-control" type="text" id="agenciaEdit" autocomplete="off"
                            placeholder="Ingrese el nombre de la agencia" [(ngModel)]="agenciaEdit">

                    </div>
                    <div class="form-group">
                        <label for="ipEdit">IP:</label>
                        <input class="form-control" type="text" id="ipEdit" autocomplete="off"
                            placeholder="Ingrese el nÃºmero de la IP" [(ngModel)]="ipEdit">
 
                    </div>
                    <div class="form-group">
                        <label for="carpetaEdit">Nombre de la carpeta:</label>
                        <input class="form-control" type="text" id="carpetaEdit"
                            autocomplete="off" placeholder="Ingrese el nombre de la carpeta" [(ngModel)]="carpetaEdit">

                    </div>
                    <div class="form-group">
                        <label for="ciudadEdit">Ciudad:</label>
                        <input class="form-control" type="text" id="ciudadEdit"
                            autocomplete="off" placeholder="Ingrese el nombre de la ciudad" [(ngModel)]="ciudadEdit">

                    </div>
                    <br>
                    <button class="btn btn-lg btn-primary btn-block" (click)="grabarEdit()" [disabled]="">GUARDAR</button>

                    <div *ngIf="invalidLogin">
                        <div>
                            Invalid credentials.
                        </div>
                    </div>
                <br>
                <button (click)="cancelEdit()" class="btn btn-lg btn-block btn-secondary">CANCELAR</button>
            </div>
        </div>
    </div>
</div>